{"version":2,"kind":"Notebook","sha256":"b2bab2736023cf4ad61870cd8b9ee9f735684ffd041a89185fb8522f9b091b63","slug":"elasticity","location":"/MFront/Elasticity.ipynb","dependencies":[],"frontmatter":{"title":"A simple elastic behaviour","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery","math":{"\\tens":{"macro":"\\underline{\\underline{#1}}"}},"numbering":{"title":{"offset":1}},"source_url":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery/blob/main/MFront/Elasticity.ipynb","edit_url":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery/edit/main/MFront/Elasticity.ipynb","exports":[{"format":"ipynb","filename":"Elasticity.ipynb","url":"/build/Elasticity-e098ef9decdac78538881b5a15e04290.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MFront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"r8MFlNSvGa"},{"type":"text","value":" implementation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"e4e8eKGYsX"}],"identifier":"mfront-implementation","label":"MFront implementation","html_id":"mfront-implementation","implicit":true,"key":"IEZGmvA7do"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To give a first introduction to writing material behaviors using ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"suV4M27Q1G"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Bg8aioeLec"},{"type":"text","value":", we will implement a very simple linear elastic model :","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tPWIolNf5C"}],"key":"aMXQ41oGLW"},{"type":"math","value":"\\tens{\\sigma} = \\lambda\\:\\mathrm{tr}(\\tens{\\varepsilon})\\tens{I}+2\\mu\\tens{\\varepsilon},","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo>=</mo><mi>λ</mi><mtext> </mtext><mrow><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">r</mi></mrow><mo stretchy=\"false\">(</mo><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"false\">)</mo><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>I</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo>+</mo><mn>2</mn><mi>μ</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma} = \\lambda\\:\\mathrm{tr}(\\tens{\\varepsilon})\\tens{I}+2\\mu\\tens{\\varepsilon},</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.15em;vertical-align:-0.4em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">tr</span></span><span class=\"mopen\">(</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6833em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6833em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0444em;vertical-align:-0.4em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">μ</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span></span>","enumerator":"1","key":"WdhFgnW6RA"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gUzj7AbhbW"},{"type":"inlineMath","value":"\\lambda","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span>","key":"oZnlUpwK1L"},{"type":"text","value":" and ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oQlbfR7nBT"},{"type":"inlineMath","value":"\\mu","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi></mrow><annotation encoding=\"application/x-tex\">\\mu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span>","key":"NmnfzsoxXa"},{"type":"text","value":" are the Lamé coefficients.\nThe parameters of the model will be Young’s modulus ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jhcWteUK2z"},{"type":"inlineMath","value":"E","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span>","key":"EeLZhffFC4"},{"type":"text","value":" and Poisson’s ration ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GNOrWt4oI6"},{"type":"inlineMath","value":"\\nu","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ν</mi></mrow><annotation encoding=\"application/x-tex\">\\nu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span></span></span></span>","key":"fVogwxmb8p"},{"type":"text","value":", while the output will be the Cauchy stress tensor ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gZ8vq8eUfM"},{"type":"inlineMath","value":"\\tens{\\sigma}","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"jEroWHRG87"},{"type":"text","value":".\nOf course, we could use one of ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ESpUs6RGWs"},{"type":"inlineCode","value":"Mfront","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OFvKICG33F"},{"type":"text","value":"’s standard ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mXLknr6qtf"},{"type":"inlineCode","value":"brick","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"cR2bBZzHR8"},{"type":"text","value":" for this purpose, but the idea here is to define everything ourselves.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"PmWCFFCiJu"}],"key":"KYJqV9XCod"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Here is a look at the corresponding ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"PSdP8w0X1Y"},{"type":"inlineCode","value":"elasticity.mfront","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"D4zn4AHj0G"},{"type":"text","value":" file:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cA1B6FZXlb"}],"key":"Kkb2DRTHj3"},{"type":"code","lang":"cpp","value":"@DSL DefaultGenericBehaviour;\n@Author Maxime Pierre;\n@Date 22/11/2025;\n\n@Behaviour Elasticity;","position":{"start":{"line":17,"column":1},"end":{"line":23,"column":1}},"key":"JpMV3pQZ3e"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"First, we specify the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"akMtXoU23f"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"domain specific language","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"D9wHuq1mg8"}],"key":"qWvGqqCpwb"},{"type":"text","value":" (DSL) that we want to use.\nIt will condition what ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"oN885nFRjh"},{"type":"inlineCode","value":"keywords","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"L1fIk7Plg5"},{"type":"text","value":" we will have access to in the rest of the file.\nAfter optionally declaring an ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"CTUYFw7YwC"},{"type":"inlineCode","value":"author","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"CdlmROrlRR"},{"type":"text","value":" and a ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"lUhZaxmRz1"},{"type":"inlineCode","value":"date","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"eNXWJmDeww"},{"type":"text","value":", we give a name to our behaviour (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"n7hNYpauHe"},{"type":"inlineCode","value":"Elasticity","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"m01uOOTqD6"},{"type":"text","value":").","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Gx8qbsX3dW"}],"key":"m7JcDYKiJk"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Next, we define the input and output variables of our model : the strain tensor ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"J5lqhabJB6"},{"type":"inlineMath","value":"\\tens{\\varepsilon}","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\varepsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"T64hRjEd1y"},{"type":"text","value":" (a ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"vISqDo5uX9"},{"type":"inlineCode","value":"gradient","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"o9Nh5Q9VsG"},{"type":"text","value":" of the displacement), and its associated ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"dZ5EUExZTG"},{"type":"inlineCode","value":"flux","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"WMDTWqRQ2a"},{"type":"text","value":" which is the stress tensor ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"ZdpdUbOc70"},{"type":"inlineMath","value":"\\tens{\\sigma}","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"iH8nyaegtE"},{"type":"text","value":".","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"EkLGUkIVFV"}],"key":"OkkRb7ie5e"},{"type":"code","lang":"cpp","value":"@Gradient StrainStensor εᵗᵒ;\nεᵗᵒ.setGlossaryName(\"Strain\");\n\n@Flux StressStensor σ;\nσ.setGlossaryName(\"Stress\");","position":{"start":{"line":32,"column":1},"end":{"line":38,"column":1}},"key":"AzsMVjvNA1"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Then, we define the material properties which must be passed to the behaviour:","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"mDO8A9MJwe"}],"key":"XcKeEqKfB7"},{"type":"code","lang":"cpp","value":"@MaterialProperty stress E;\nE.setGlossaryName(\"YoungModulus\");\n\n@MaterialProperty real ν;\nν.setGlossaryName(\"PoissonRatio\");","position":{"start":{"line":42,"column":1},"end":{"line":48,"column":1}},"key":"IQo8mw37J4"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Naming variables in ","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"PjIndPn62U"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"Tek8gcOFM4"}],"key":"BUwGkUH5jO"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Note that all the names of variables and properties used so far are very common, and part of the standard ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"HQOBvT9fKs"},{"type":"inlineCode","value":"glossary","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"MxU28pq27Y"},{"type":"text","value":" of ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"TJ04HL0oHC"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"sI1XgiIxdd"},{"type":"text","value":". They are therefore applied using the ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"ZFJI4rrqnf"},{"type":"inlineCode","value":"setGlossaryName","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"o9ilES2XBZ"},{"type":"text","value":" method. For names which are not part of the glossary, any name can be applied using the ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"lSFkYMaDEk"},{"type":"inlineCode","value":"setEntryName","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"JuHoM81DKh"},{"type":"text","value":" method instead.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"YWELGEyDBr"}],"key":"mWXyddp13v"}],"class":"dropdown","open":true,"key":"TmJHAsi2Ya"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Now, we define the blocks composing the ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"TkkMLtqHQv"},{"type":"emphasis","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"tangent operator","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"ivtRYHgkFE"}],"key":"HPNfcB4kQb"},{"type":"text","value":".\nIn our simple case, their is only one, ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"yrqBmJH73n"},{"type":"inlineMath","value":"\\partial\\tens{\\sigma}/\\partial\\tens{\\varepsilon}","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∂</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">∂</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\partial\\tens{\\sigma}/\\partial\\tens{\\varepsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.15em;vertical-align:-0.4em;\"></span><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"xsn9JqqhhB"},{"type":"text","value":", which corresponds to the stiffness tensor ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"zebQAckpXF"},{"type":"inlineMath","value":"\\mathbb{C}","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>","key":"qj7PHMH9TP"},{"type":"text","value":".","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"a7hPJH7TfR"}],"key":"TCWRJlGZsC"},{"type":"code","lang":"cpp","value":"@TangentOperatorBlocks{∂σ∕∂Δεᵗᵒ};\n@ProvidesTangentOperator ;","position":{"start":{"line":58,"column":1},"end":{"line":61,"column":1}},"key":"S2s08rhTQH"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Finally, we enter the core of the behaviour with the ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"kPyBHNomeU"},{"type":"inlineCode","value":"Integrator","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"JRBHj1oD9R"},{"type":"text","value":" block.\nThis is where the behaviour of the material is actually calculated.\n","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"lUmgzkrHZh"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"lEGSyb675x"},{"type":"text","value":" provides some helper functions to calculate Lamé’s coefficients from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"nhp120c9Fz"},{"type":"inlineMath","value":"E","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span>","key":"pyujsHBHwW"},{"type":"text","value":" and ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"OPw3LrI1UF"},{"type":"inlineMath","value":"\\nu","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ν</mi></mrow><annotation encoding=\"application/x-tex\">\\nu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span></span></span></span>","key":"Jm0bfqWmrT"},{"type":"text","value":".\nThen, we calculate the stress with an incremental formulation (note that in the case of elasticity, a total formulation would also have been acceptable).\nThe last part gives the one tangent operator block that was declared above.","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"uCxstZkiLe"}],"key":"jNBUNl0MDX"},{"type":"code","lang":"cpp","value":"@Integrator{\n  const auto λ = computeLambda(E, ν);\n  const auto μ = computeMu(E, ν);\n  σ += λ ⋅ trace(Δεᵗᵒ) ⋅ I₂ + 2 ⋅ μ ⋅ Δεᵗᵒ ;\n\n  if (computeTangentOperator_) {\n    ∂σ∕∂Δεᵗᵒ = λ ⋅ (I₂ ⊗ I₂) + 2 ⋅ μ ⋅ I₄;\n  }\n}","position":{"start":{"line":69,"column":1},"end":{"line":79,"column":1}},"key":"tw2chKhYl5"}],"visibility":"show","key":"oyKenwJibK"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compiling a behaviour","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h7V9JNPHjM"}],"identifier":"compiling-a-behaviour","label":"Compiling a behaviour","html_id":"compiling-a-behaviour","implicit":true,"key":"bSgRKOGCQ4"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Once the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yVGInqtI3L"},{"type":"inlineCode","value":".mfront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z3UbNHahdE"},{"type":"text","value":" file is written, we need to compile it to create a shared library that can then be used in other contexts (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Lv6A1K208r"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"juu4SKWDJL"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ErJnhITouX"},{"type":"inlineCode","value":"python","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zlSIb63uY3"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tfuLFZ0W7b"},{"type":"inlineCode","value":"FEniCS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TbgcMmNsTl"},{"type":"text","value":"...).\nThis can be done from the terminal using the following command:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I7kHI4KOJC"}],"key":"R1Gg6mWSBj"},{"type":"code","lang":"bash","value":"mfront --obuild --interface=generic elasticity.mfront","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"key":"H9iC9wvPjm"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Here, we used the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"En0LVJJyfz"},{"type":"inlineCode","value":"generic","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"KxViEJdykc"},{"type":"text","value":" interface, which is the one used to plug the constitutive laws into ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CV61biDHFx"},{"type":"inlineCode","value":"python","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Dn0r4TJMdR"},{"type":"text","value":" or ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"MPURJ4nKbM"},{"type":"inlineCode","value":"FEniCS","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Do5MeyfKX1"},{"type":"text","value":" using ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"a3EnWYOgvG"},{"type":"inlineCode","value":"MGIS","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"pB6YpD0Jy7"},{"type":"text","value":", the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ksrsRq12aL"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"pk7HGyOiyx"},{"type":"text","value":" Generic Interface Support.\nThe command creates or updates a shared library ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Ed9XaTStrg"},{"type":"inlineCode","value":"src/libBehaviour.so","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Odm4rdd6WX"},{"type":"text","value":" on Linux or ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"dKmrpDqIXJ"},{"type":"inlineCode","value":"src/libBehaviour.dylib","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"adniGbq0HY"},{"type":"text","value":" on MacOS (note the difference in extension for dynamic libraries).","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NzFVdgDYX6"}],"key":"CLWBM6XaoT"}],"visibility":"show","key":"AzMWkviDOh"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Testing the behaviour with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DEfWcvJ0GD"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NSAQsKs4zJ"}],"identifier":"testing-the-behaviour-with-mtest","label":"Testing the behaviour with mtest","html_id":"testing-the-behaviour-with-mtest","implicit":true,"key":"mvur6bqSo4"},{"type":"code","lang":"cpp","value":"@Behaviour<Generic> 'src/libBehaviour.dylib' 'Elasticity';\n@MaterialProperty<constant> 'YoungModulus' 1e+10 ;\n@MaterialProperty<constant> 'PoissonRatio' 0.2 ;","position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"key":"Mlk1R59F9P"},{"type":"code","lang":"cpp","value":"@ExternalStateVariable 'Temperature' 293.15 ;\n\n@ImposedDrivingVariable 'StrainXX' 0.0;\n@ImposedDrivingVariable 'StrainYY' 0.0;\n\n@ImposedThermodynamicForce 'StressZZ' {0.0: 0.0, 1.0: -1e7};\n\n@Times {0.0, 1.0 in 10};","position":{"start":{"line":8,"column":1},"end":{"line":17,"column":1}},"key":"A8jTXhVUvR"},{"type":"code","lang":"bash","value":"mtest elasticity.mtest","position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"key":"od1QbPdSbu"}],"visibility":"show","key":"PCpHkJT48l"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Interacting with the behaviour in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XG7y7qHSLr"},{"type":"inlineCode","value":"python","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pYktii4ALk"}],"identifier":"interacting-with-the-behaviour-in-python","label":"Interacting with the behaviour in python","html_id":"interacting-with-the-behaviour-in-python","implicit":true,"key":"PRpANBJljG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FOFf4Wc2Ds"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ivi2plaqDi"},{"type":"text","value":" package in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rqKW3uXjQX"},{"type":"inlineCode","value":"python","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wmjekhVoSy"},{"type":"text","value":", it is possible to interact with a compiled ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wj7b9t3wJC"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FLqLESMRKZ"},{"type":"text","value":" behaviour.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ggUJBfOjrW"}],"key":"qWYXr3K8mb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"First, we have to set the behaviour for our test as well as the different material properties that are necessary.\nWe chose Young’s Modulus as 10 MPa and Poisson’s ration as 0.2.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BWg4yYn0aI"}],"key":"uiFIZaQ3Qu"}],"visibility":"show","key":"Z4IlvokZ1d"},{"type":"block","kind":"notebook-code","data":{"editable":true,"jupyterbook":{"source_hidden":{"label":"Show code for Elasticity model"}},"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from sys import platform\nimport std\nimport tfel.math\nimport numpy as np\nfrom mtest import (\n    MTest,\n    VerboseLevel,\n    PredictionPolicy,\n    setVerboseMode,\n    MTestCurrentState,\n    MTestWorkSpace,\n    Behaviour,\n)\n\ndef lib_ext() -> str | None:\n    if platform == \"linux\":\n        return \".so\"\n    elif platform == \"darwin\":\n        return \".dylib\"\n\nsetVerboseMode(VerboseLevel.VERBOSE_LEVEL2)","visibility":"hide","key":"Ru1X6oSDwD"},{"type":"output","id":"SSrKjH41huWrltWjJrlvn","data":[],"visibility":"show","key":"C897iTespK"}],"visibility":"show","key":"VRH8fzKFig"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"test = MTest()\nstate = MTestCurrentState()\nworkspace = MTestWorkSpace()\n\n# Setting the behaviour\nbehaviour = Behaviour(\"generic\", f\"../MFront_library/src/libBehaviour{lib_ext()}\", \"Elasticity\",\"Tridimensional\")\ntest.setBehaviour(\"generic\", f\"../MFront_library/src/libBehaviour{lib_ext()}\", \"Elasticity\")\n\n# Setting the material properties\ntest.setMaterialProperty(\"YoungModulus\", 1e10)\ntest.setMaterialProperty(\"PoissonRatio\", 0.2)","visibility":"show","key":"aAGsJ4mJrq"},{"type":"output","id":"2ejvrx6yQuxd0JmLO1aBB","data":[],"visibility":"show","key":"Vhq5NccqHi"}],"visibility":"show","key":"PNrH3eEDCC"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, we set the conditions for the test. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r34z1BcJdB"},{"type":"inlineCode","value":"setImposedGradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"odtvbUauHX"},{"type":"text","value":" method allows to control the different components of the gradients (here strain) by their name, and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hUc3S25po1"},{"type":"inlineCode","value":"setImposedThermodynamicForce","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gJTHkopY7P"},{"type":"text","value":" method does the same for thermodynamic forces (here stress). A single value can be provided, or a dictionary with several entries to have a variation over time, similar to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Kl8jzNiWc9"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aTH3CjOa0r"},{"type":"text","value":" syntax.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qldr7KQmfB"}],"key":"KcTL68CIlE"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We impose oedometric conditions on the sample: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UZszLcGgNg"},{"type":"inlineMath","value":"x","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>","key":"wD9l6TRLt8"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C9EzzcYRl5"},{"type":"inlineMath","value":"y","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>","key":"fIKktsVB4l"},{"type":"text","value":" deformation are prevented while we apply an axial load up the 10 MPa in compression.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bvYKlzAAm0"}],"key":"lWDELdR3jB"}],"visibility":"show","key":"t0HSIFuTec"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"test.setExternalStateVariable(\"Temperature\", 293.15)\ntest.setImposedGradient(\"StrainXX\", 0.0)\ntest.setImposedGradient(\"StrainYY\", 0.0)\ntest.setImposedThermodynamicForce(\"StressZZ\", {0.0: 0.0, 1.0: -1e7})\n\ntest.completeInitialisation()\ntest.initializeCurrentState(state)\ntest.initializeWorkSpace(workspace)","visibility":"show","key":"Aai67vOSb9"},{"type":"output","id":"z9u967eLD9n9q6Mxc3q01","data":[],"visibility":"show","key":"UFGFew1NXH"}],"visibility":"show","key":"EuV3h47EYE"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We perform a simulation with 10 steps between times 0 and 1, and store the results to show the stress-strain curve of the oedometric test.\nObviously, this is a very simple test and the results is a simple line with slope ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pvrUto45bK"},{"type":"inlineMath","value":"E_\\mathrm{oed}","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">E_\\mathrm{oed}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">oed</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"HwDe7Kcuat"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XdyClT3Gc8"}],"key":"g1WgGkGcr1"}],"visibility":"show","key":"LG73Zjw7XR"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"t = np.linspace(0,1,10)\nepszz_index = behaviour.getGradientComponentPosition(\"StrainZZ\")\nsigzz_index = behaviour.getThermodynamicForceComponentPosition(\"StressZZ\")\n\nepszz = [0.0]\nsigzz = [0.0]\n\nfor i in range(len(t)-1):\n    test.execute(state, workspace, t[i], t[i+1])\n    epszz.append(-state.e1[epszz_index])\n    sigzz.append(-state.s1[sigzz_index])","visibility":"show","key":"IU7FR7yLVJ"},{"type":"output","id":"bOowQNjRDYD4M01QrmlbM","data":[],"visibility":"show","key":"Kd4TGVl0KR"}],"visibility":"show","key":"MWxMDA0dLW"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\nplt.plot(epszz, sigzz)\nplt.xlabel(r\"$\\varepsilon_{zz}$ [Pa]\")\nplt.ylabel(r\"$\\sigma_{zz}$ [-]\")\nplt.show()","visibility":"hide","key":"ulI3n20rcW"},{"type":"output","id":"m8OawWYu7NAgcHqYr89XJ","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a653dae2df7eb6578702d574efa5b659","path":"/build/a653dae2df7eb6578702d574efa5b659.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"CpBZjJduIa"}],"visibility":"show","key":"iq44o7RcIh"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can compare the resulting oedometric modulus from the simulation with the analytical formula:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IfmLZ6ulLC"}],"key":"KbNMMFt2fB"},{"type":"math","value":"E_\\mathrm{oed} = \\frac{E(1-\\nu)}{(1+\\nu)(1-2\\nu)}.","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>E</mi><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>ν</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>ν</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mn>2</mn><mi>ν</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">E_\\mathrm{oed} = \\frac{E(1-\\nu)}{(1+\\nu)(1-2\\nu)}.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">oed</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span></span></span></span></span>","enumerator":"2","key":"JKgRzYL3u0"}],"visibility":"show","key":"MnmBjkCsak"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Modulus from simulation: {sigzz[-1]/epszz[-1]/1e9:.2f} GPa\")\nprint(f\"Analytical oedometric modulus: {1e10*(1-0.2)/(1+0.2)/(1-2*0.2)/1e9:.2f} GPa\")","visibility":"show","key":"lxBCbWDFKI"},{"type":"output","id":"r4zoVjBFvRWrbFUKy14EJ","data":[{"name":"stdout","output_type":"stream","text":"Modulus from simulation: 11.11 GPa\nAnalytical oedometric modulus: 11.11 GPa\n"}],"visibility":"show","key":"BF9KZoiW7l"}],"visibility":"show","key":"uKyKAAWZEY"}],"key":"BjLj7328LX"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Introduction","url":"/introduction","group":"Implementing material behaviors with MFront"},"next":{"title":"Poroelasticity: introduction to multiphysics","url":"/poroelasticity","group":"Implementing material behaviors with MFront"}}},"domain":"http://localhost:3000"}