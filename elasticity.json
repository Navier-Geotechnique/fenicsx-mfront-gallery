{"version":2,"kind":"Notebook","sha256":"b2bab2736023cf4ad61870cd8b9ee9f735684ffd041a89185fb8522f9b091b63","slug":"elasticity","location":"/MFront/Elasticity.ipynb","dependencies":[],"frontmatter":{"title":"A simple elastic behaviour","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery","math":{"\\tens":{"macro":"\\underline{\\underline{#1}}"}},"numbering":{"title":{"offset":1}},"source_url":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery/blob/main/MFront/Elasticity.ipynb","edit_url":"https://github.com/Navier-Geotechnique/fenicsx-mfront-gallery/edit/main/MFront/Elasticity.ipynb","exports":[{"format":"ipynb","filename":"Elasticity.ipynb","url":"/fenicsx-mfront-gallery/build/Elasticity-e098ef9decdac78538881b5a15e04290.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"MFront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RBiQkNMsf8"},{"type":"text","value":" implementation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Npht0qZPTQ"}],"identifier":"mfront-implementation","label":"MFront implementation","html_id":"mfront-implementation","implicit":true,"key":"RYCS8AsyQu"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To give a first introduction to writing material behaviors using ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Hrn1SykR08"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sUpjAQlSqj"},{"type":"text","value":", we will implement a very simple linear elastic model :","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pUYRIMEZBV"}],"key":"VFGSewYACC"},{"type":"math","value":"\\tens{\\sigma} = \\lambda\\:\\mathrm{tr}(\\tens{\\varepsilon})\\tens{I}+2\\mu\\tens{\\varepsilon},","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo>=</mo><mi>λ</mi><mtext> </mtext><mrow><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">r</mi></mrow><mo stretchy=\"false\">(</mo><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"false\">)</mo><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>I</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo>+</mo><mn>2</mn><mi>μ</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma} = \\lambda\\:\\mathrm{tr}(\\tens{\\varepsilon})\\tens{I}+2\\mu\\tens{\\varepsilon},</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.15em;vertical-align:-0.4em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">tr</span></span><span class=\"mopen\">(</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6833em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6833em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0444em;vertical-align:-0.4em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">μ</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span></span>","enumerator":"1","key":"Pei2X9APy2"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bt8VcVB21A"},{"type":"inlineMath","value":"\\lambda","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span>","key":"wK9LoVtIcj"},{"type":"text","value":" and ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"CLGbSkwHS5"},{"type":"inlineMath","value":"\\mu","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi></mrow><annotation encoding=\"application/x-tex\">\\mu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span>","key":"eyAMYEsGaT"},{"type":"text","value":" are the Lamé coefficients.\nThe parameters of the model will be Young’s modulus ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Oa41IynE9c"},{"type":"inlineMath","value":"E","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span>","key":"k12xKfelgY"},{"type":"text","value":" and Poisson’s ration ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"b47oVLCrYT"},{"type":"inlineMath","value":"\\nu","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ν</mi></mrow><annotation encoding=\"application/x-tex\">\\nu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span></span></span></span>","key":"gp4WeZNjTf"},{"type":"text","value":", while the output will be the Cauchy stress tensor ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mv68n6GedY"},{"type":"inlineMath","value":"\\tens{\\sigma}","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"lhmyH1zQZy"},{"type":"text","value":".\nOf course, we could use one of ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"i3oPOcZiuC"},{"type":"inlineCode","value":"Mfront","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OstTcLe2sG"},{"type":"text","value":"’s standard ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NOpBfrHmDz"},{"type":"inlineCode","value":"brick","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"rSSqNIe2Yj"},{"type":"text","value":" for this purpose, but the idea here is to define everything ourselves.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"B3Kwmvv3gH"}],"key":"CKFU34Gkmn"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Here is a look at the corresponding ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FkCok72A63"},{"type":"inlineCode","value":"elasticity.mfront","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"GlH7cuXPdm"},{"type":"text","value":" file:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"gCFVPgTE6H"}],"key":"gDfFk2L8fQ"},{"type":"code","lang":"cpp","value":"@DSL DefaultGenericBehaviour;\n@Author Maxime Pierre;\n@Date 22/11/2025;\n\n@Behaviour Elasticity;","position":{"start":{"line":17,"column":1},"end":{"line":23,"column":1}},"key":"iNEil88MY9"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"First, we specify the ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"yKUwonNxTc"},{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"domain specific language","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"TkcyJKEGZ2"}],"key":"ER6zn7KL5Y"},{"type":"text","value":" (DSL) that we want to use.\nIt will condition what ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"k2lRpDWTlg"},{"type":"inlineCode","value":"keywords","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"lryfFXWle5"},{"type":"text","value":" we will have access to in the rest of the file.\nAfter optionally declaring an ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"I44pZESt75"},{"type":"inlineCode","value":"author","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"IwhSg5jrHY"},{"type":"text","value":" and a ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"sZ8xWC0PDr"},{"type":"inlineCode","value":"date","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"faXzVDF4Qp"},{"type":"text","value":", we give a name to our behaviour (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"fsge9MB0BU"},{"type":"inlineCode","value":"Elasticity","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ERs4YCnIUu"},{"type":"text","value":").","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"EpcxqKm19m"}],"key":"qXhpKfBTeC"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Next, we define the input and output variables of our model : the strain tensor ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"x68aRPNHPq"},{"type":"inlineMath","value":"\\tens{\\varepsilon}","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\varepsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"ubiSglzaYk"},{"type":"text","value":" (a ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"lTMCQ2F4OM"},{"type":"inlineCode","value":"gradient","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"aQ8tjsrpKt"},{"type":"text","value":" of the displacement), and its associated ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"jORHyg7Nvu"},{"type":"inlineCode","value":"flux","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"qwR0H7qiSl"},{"type":"text","value":" which is the stress tensor ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"n9b82W76VV"},{"type":"inlineMath","value":"\\tens{\\sigma}","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\tens{\\sigma}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8306em;vertical-align:-0.4em;\"></span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"JZ9MMuXP4P"},{"type":"text","value":".","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"gKxXydtv3r"}],"key":"drUEX8jbO9"},{"type":"code","lang":"cpp","value":"@Gradient StrainStensor εᵗᵒ;\nεᵗᵒ.setGlossaryName(\"Strain\");\n\n@Flux StressStensor σ;\nσ.setGlossaryName(\"Stress\");","position":{"start":{"line":32,"column":1},"end":{"line":38,"column":1}},"key":"p7sxDCpZdU"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Then, we define the material properties which must be passed to the behaviour:","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"ZTTXDff3b5"}],"key":"KUz5FRbixs"},{"type":"code","lang":"cpp","value":"@MaterialProperty stress E;\nE.setGlossaryName(\"YoungModulus\");\n\n@MaterialProperty real ν;\nν.setGlossaryName(\"PoissonRatio\");","position":{"start":{"line":42,"column":1},"end":{"line":48,"column":1}},"key":"TOLH3dGm7J"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Naming variables in ","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"xYBOCTh0rl"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"giE5MSyWUS"}],"key":"wQsoH4SQFx"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Note that all the names of variables and properties used so far are very common, and part of the standard ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"guDXSPey4G"},{"type":"inlineCode","value":"glossary","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"k8jD4wIAEA"},{"type":"text","value":" of ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"FXRCK9xb3V"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"XDhjIqlooq"},{"type":"text","value":". They are therefore applied using the ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"QwZWIpIdrd"},{"type":"inlineCode","value":"setGlossaryName","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"ECXgyduE00"},{"type":"text","value":" method. For names which are not part of the glossary, any name can be applied using the ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"A8Nadl5vQn"},{"type":"inlineCode","value":"setEntryName","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"f0p0xzrkWa"},{"type":"text","value":" method instead.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"KGMYzlLphN"}],"key":"k0Nfb3BL1B"}],"class":"dropdown","open":true,"key":"UaR5wDIFh0"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Now, we define the blocks composing the ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"MDRAaHIwBO"},{"type":"emphasis","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"tangent operator","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"zLYAbOc3lE"}],"key":"jGZZ3zHC7x"},{"type":"text","value":".\nIn our simple case, their is only one, ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"e0YfCotPFv"},{"type":"inlineMath","value":"\\partial\\tens{\\sigma}/\\partial\\tens{\\varepsilon}","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∂</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>σ</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">∂</mi><munder accentunder=\"true\"><munder accentunder=\"true\"><mi>ε</mi><mo stretchy=\"true\">‾</mo></munder><mo stretchy=\"true\">‾</mo></munder></mrow><annotation encoding=\"application/x-tex\">\\partial\\tens{\\sigma}/\\partial\\tens{\\varepsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.15em;vertical-align:-0.4em;\"></span><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.64em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord underline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.84em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"underline-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ε</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4em;\"><span></span></span></span></span></span></span></span></span>","key":"j41I7GEGoB"},{"type":"text","value":", which corresponds to the stiffness tensor ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"y5Qi412GqH"},{"type":"inlineMath","value":"\\mathbb{C}","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>","key":"z1IUJgRNeU"},{"type":"text","value":".","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"K0pUEQgGfd"}],"key":"SFborjEzCH"},{"type":"code","lang":"cpp","value":"@TangentOperatorBlocks{∂σ∕∂Δεᵗᵒ};\n@ProvidesTangentOperator ;","position":{"start":{"line":58,"column":1},"end":{"line":61,"column":1}},"key":"F1Itdoe9M6"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Finally, we enter the core of the behaviour with the ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"Ad9jr6KrJu"},{"type":"inlineCode","value":"Integrator","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ULiSwV15En"},{"type":"text","value":" block.\nThis is where the behaviour of the material is actually calculated.\n","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"wztlqdqa2k"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"Xvei3Rncf8"},{"type":"text","value":" provides some helper functions to calculate Lamé’s coefficients from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"m5kgHCDkCI"},{"type":"inlineMath","value":"E","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span>","key":"NEPDSsfipF"},{"type":"text","value":" and ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"bsOnhvhZ2e"},{"type":"inlineMath","value":"\\nu","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ν</mi></mrow><annotation encoding=\"application/x-tex\">\\nu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span></span></span></span>","key":"VM4TNZVkxR"},{"type":"text","value":".\nThen, we calculate the stress with an incremental formulation (note that in the case of elasticity, a total formulation would also have been acceptable).\nThe last part gives the one tangent operator block that was declared above.","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"y7OFbweYOV"}],"key":"nLJgf6lapO"},{"type":"code","lang":"cpp","value":"@Integrator{\n  const auto λ = computeLambda(E, ν);\n  const auto μ = computeMu(E, ν);\n  σ += λ ⋅ trace(Δεᵗᵒ) ⋅ I₂ + 2 ⋅ μ ⋅ Δεᵗᵒ ;\n\n  if (computeTangentOperator_) {\n    ∂σ∕∂Δεᵗᵒ = λ ⋅ (I₂ ⊗ I₂) + 2 ⋅ μ ⋅ I₄;\n  }\n}","position":{"start":{"line":69,"column":1},"end":{"line":79,"column":1}},"key":"IaTB33W8eo"}],"visibility":"show","key":"vBQIBce5j6"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compiling a behaviour","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hOKZcebhL3"}],"identifier":"compiling-a-behaviour","label":"Compiling a behaviour","html_id":"compiling-a-behaviour","implicit":true,"key":"mPuhBNkKNI"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Once the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"INALWmHwPB"},{"type":"inlineCode","value":".mfront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"POV8Fia1rC"},{"type":"text","value":" file is written, we need to compile it to create a shared library that can then be used in other contexts (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Rfo7GFm8Jf"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"stUBnlyHuP"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NiVcWC5whq"},{"type":"inlineCode","value":"python","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Vz03MsJsig"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HWAmKYpwxn"},{"type":"inlineCode","value":"FEniCS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Sg2LBaMkvT"},{"type":"text","value":"...).\nThis can be done from the terminal using the following command:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lZvIZAbOJd"}],"key":"rlu9R8Qdvf"},{"type":"code","lang":"bash","value":"mfront --obuild --interface=generic elasticity.mfront","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"key":"XVGpJKK8TP"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Here, we used the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"W6yx8wypHV"},{"type":"inlineCode","value":"generic","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kL7lkcKHJt"},{"type":"text","value":" interface, which is the one used to plug the constitutive laws into ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"om4NROJjba"},{"type":"inlineCode","value":"python","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SOW6F6hN19"},{"type":"text","value":" or ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"beePMkwsPZ"},{"type":"inlineCode","value":"FEniCS","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"tO63iFrziE"},{"type":"text","value":" using ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"qR1bYRKWsE"},{"type":"inlineCode","value":"MGIS","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"U609hlobIb"},{"type":"text","value":", the ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"bBW2ULTzGI"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CQhTar8G6q"},{"type":"text","value":" Generic Interface Support.\nThe command creates or updates a shared library ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"t93AEmKEUC"},{"type":"inlineCode","value":"src/libBehaviour.so","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xDsaRPnQ3j"},{"type":"text","value":" on Linux or ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"MQejzIqnKm"},{"type":"inlineCode","value":"src/libBehaviour.dylib","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vqfAHZN04m"},{"type":"text","value":" on MacOS (note the difference in extension for dynamic libraries).","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Tb7NbBuHfO"}],"key":"wn4iTu7fDe"}],"visibility":"show","key":"FiPfE0YpEX"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Testing the behaviour with ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K5FFzpN6PZ"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Sf7bXM3L17"}],"identifier":"testing-the-behaviour-with-mtest","label":"Testing the behaviour with mtest","html_id":"testing-the-behaviour-with-mtest","implicit":true,"key":"PFwDMoB9h0"},{"type":"code","lang":"cpp","value":"@Behaviour<Generic> 'src/libBehaviour.dylib' 'Elasticity';\n@MaterialProperty<constant> 'YoungModulus' 1e+10 ;\n@MaterialProperty<constant> 'PoissonRatio' 0.2 ;","position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"key":"ixT9t1DLTb"},{"type":"code","lang":"cpp","value":"@ExternalStateVariable 'Temperature' 293.15 ;\n\n@ImposedDrivingVariable 'StrainXX' 0.0;\n@ImposedDrivingVariable 'StrainYY' 0.0;\n\n@ImposedThermodynamicForce 'StressZZ' {0.0: 0.0, 1.0: -1e7};\n\n@Times {0.0, 1.0 in 10};","position":{"start":{"line":8,"column":1},"end":{"line":17,"column":1}},"key":"yZh13MGITf"},{"type":"code","lang":"bash","value":"mtest elasticity.mtest","position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"key":"SZ2bACrfSI"}],"visibility":"show","key":"BEkkdpW2I8"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Interacting with the behaviour in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MoqDVQ0BZ6"},{"type":"inlineCode","value":"python","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SoH1iYtNB3"}],"identifier":"interacting-with-the-behaviour-in-python","label":"Interacting with the behaviour in python","html_id":"interacting-with-the-behaviour-in-python","implicit":true,"key":"hiwXxvMySL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HTJZdsVNYP"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SjgZjIpOuV"},{"type":"text","value":" package in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HsllAhguQc"},{"type":"inlineCode","value":"python","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ahBKst7eOx"},{"type":"text","value":", it is possible to interact with a compiled ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mWBJK3TEAD"},{"type":"inlineCode","value":"MFront","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fL76xcanoq"},{"type":"text","value":" behaviour.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OGPsDnyDxg"}],"key":"rFIM3qXz3L"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"First, we have to set the behaviour for our test as well as the different material properties that are necessary.\nWe chose Young’s Modulus as 10 MPa and Poisson’s ration as 0.2.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Dhth69vhLj"}],"key":"nvwXydhF7H"}],"visibility":"show","key":"Lt3VGBVOu5"},{"type":"block","kind":"notebook-code","data":{"editable":true,"jupyterbook":{"source_hidden":{"label":"Show code for Elasticity model"}},"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from sys import platform\nimport std\nimport tfel.math\nimport numpy as np\nfrom mtest import (\n    MTest,\n    VerboseLevel,\n    PredictionPolicy,\n    setVerboseMode,\n    MTestCurrentState,\n    MTestWorkSpace,\n    Behaviour,\n)\n\ndef lib_ext() -> str | None:\n    if platform == \"linux\":\n        return \".so\"\n    elif platform == \"darwin\":\n        return \".dylib\"\n\nsetVerboseMode(VerboseLevel.VERBOSE_LEVEL2)","visibility":"hide","key":"VNli8Czol9"},{"type":"output","id":"QwanNT2Y9UeZtIb795MmG","data":[],"visibility":"show","key":"kBe1FGqbtf"}],"visibility":"show","key":"C0dBWOW2OK"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"test = MTest()\nstate = MTestCurrentState()\nworkspace = MTestWorkSpace()\n\n# Setting the behaviour\nbehaviour = Behaviour(\"generic\", f\"../MFront_library/src/libBehaviour{lib_ext()}\", \"Elasticity\",\"Tridimensional\")\ntest.setBehaviour(\"generic\", f\"../MFront_library/src/libBehaviour{lib_ext()}\", \"Elasticity\")\n\n# Setting the material properties\ntest.setMaterialProperty(\"YoungModulus\", 1e10)\ntest.setMaterialProperty(\"PoissonRatio\", 0.2)","visibility":"show","key":"hG2fVPsPmx"},{"type":"output","id":"I3HY25efw0qEm1DwhvOdO","data":[],"visibility":"show","key":"mxq3ramV67"}],"visibility":"show","key":"vLpkZMJars"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, we set the conditions for the test. The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bXTwAQXWKb"},{"type":"inlineCode","value":"setImposedGradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MeHlNWupdk"},{"type":"text","value":" method allows to control the different components of the gradients (here strain) by their name, and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BKVV4HIld2"},{"type":"inlineCode","value":"setImposedThermodynamicForce","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xG7k0dATDX"},{"type":"text","value":" method does the same for thermodynamic forces (here stress). A single value can be provided, or a dictionary with several entries to have a variation over time, similar to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VOUQEQxaWP"},{"type":"inlineCode","value":"mtest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ph7T5vnVoP"},{"type":"text","value":" syntax.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kcGD6y2svU"}],"key":"V1XNW0RBAJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We impose oedometric conditions on the sample: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FJ11PUvrR7"},{"type":"inlineMath","value":"x","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>","key":"rgqUkaghib"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ULjFLRO8OA"},{"type":"inlineMath","value":"y","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>","key":"saqUR0thJJ"},{"type":"text","value":" deformation are prevented while we apply an axial load up the 10 MPa in compression.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YS0CmcoNjZ"}],"key":"D9Ne99eEcJ"}],"visibility":"show","key":"xxjTcN2oN9"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"test.setExternalStateVariable(\"Temperature\", 293.15)\ntest.setImposedGradient(\"StrainXX\", 0.0)\ntest.setImposedGradient(\"StrainYY\", 0.0)\ntest.setImposedThermodynamicForce(\"StressZZ\", {0.0: 0.0, 1.0: -1e7})\n\ntest.completeInitialisation()\ntest.initializeCurrentState(state)\ntest.initializeWorkSpace(workspace)","visibility":"show","key":"QsIpQoYXsQ"},{"type":"output","id":"l1JCGzXwWyhlSQj44dzJB","data":[],"visibility":"show","key":"WKTm3EdSyR"}],"visibility":"show","key":"UNomdFesiR"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We perform a simulation with 10 steps between times 0 and 1, and store the results to show the stress-strain curve of the oedometric test.\nObviously, this is a very simple test and the results is a simple line with slope ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aObNCf6uXr"},{"type":"inlineMath","value":"E_\\mathrm{oed}","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">E_\\mathrm{oed}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">oed</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"VqnbAH81G8"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cgnBrrtSFD"}],"key":"rcs2Twsir3"}],"visibility":"show","key":"E7Wo1WDFfU"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"t = np.linspace(0,1,10)\nepszz_index = behaviour.getGradientComponentPosition(\"StrainZZ\")\nsigzz_index = behaviour.getThermodynamicForceComponentPosition(\"StressZZ\")\n\nepszz = [0.0]\nsigzz = [0.0]\n\nfor i in range(len(t)-1):\n    test.execute(state, workspace, t[i], t[i+1])\n    epszz.append(-state.e1[epszz_index])\n    sigzz.append(-state.s1[sigzz_index])","visibility":"show","key":"mivUpu28ac"},{"type":"output","id":"9vVjp2JRnsOhvSf5rk8V3","data":[],"visibility":"show","key":"Z6sd0zgWtj"}],"visibility":"show","key":"m7lepftdQX"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\nplt.plot(epszz, sigzz)\nplt.xlabel(r\"$\\varepsilon_{zz}$ [Pa]\")\nplt.ylabel(r\"$\\sigma_{zz}$ [-]\")\nplt.show()","visibility":"hide","key":"CsBL5HCbod"},{"type":"output","id":"4wAwrYRmrr4AVHuLcWMps","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a653dae2df7eb6578702d574efa5b659","path":"/fenicsx-mfront-gallery/build/a653dae2df7eb6578702d574efa5b659.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ln1gdhaoc9"}],"visibility":"show","key":"nnPPUnqKJw"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can compare the resulting oedometric modulus from the simulation with the analytical formula:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XdBZMl6GgL"}],"key":"OX59Bpceum"},{"type":"math","value":"E_\\mathrm{oed} = \\frac{E(1-\\nu)}{(1+\\nu)(1-2\\nu)}.","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>E</mi><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>ν</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>ν</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mn>2</mn><mi>ν</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">E_\\mathrm{oed} = \\frac{E(1-\\nu)}{(1+\\nu)(1-2\\nu)}.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">oed</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.06366em;\">ν</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span></span></span></span></span>","enumerator":"2","key":"M8aj85W5yt"}],"visibility":"show","key":"deAX4uhIzt"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f\"Modulus from simulation: {sigzz[-1]/epszz[-1]/1e9:.2f} GPa\")\nprint(f\"Analytical oedometric modulus: {1e10*(1-0.2)/(1+0.2)/(1-2*0.2)/1e9:.2f} GPa\")","visibility":"show","key":"BFzY7BaxTo"},{"type":"output","id":"wwcEggJ3kCRxCxmewtXNW","data":[{"name":"stdout","output_type":"stream","text":"Modulus from simulation: 11.11 GPa\nAnalytical oedometric modulus: 11.11 GPa\n"}],"visibility":"show","key":"dcsvofiJbq"}],"visibility":"show","key":"XCCmmiRKIp"}],"key":"Lyf2HLirxe"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Introduction","url":"/introduction","group":"Implementing material behaviors with MFront"},"next":{"title":"Poroelasticity: introduction to multiphysics","url":"/poroelasticity","group":"Implementing material behaviors with MFront"}}},"domain":"http://localhost:3000"}